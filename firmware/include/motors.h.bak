#ifndef	MOTORS_H
#define MOTORS_H

#define MOTOR_FORWARD 1
#define MOTOR_BACKWARD 0

#define MOTOR_INVERT_LEFT 0
#define MOTOR_INVERT_RIGHT 1

#include "gpioDevice.h"

namespace micromouse {
	
class MotorSystem {
	
public:
	MotorSystem(std::string pruFile,
				GpioDevice* leftDirPin,
				GpioDevice* rightDirPin,
				GpioDevice* enablePin);
				
	void enable();
	void disable();
	int beginDrive(unsigned int steps,
				unsigned int speed,
				unsigned int directionLeft,
				unsigned int directionRight);
	int writePRU(int data);
	int readPRU(int* data);
	int requestedError(bool* result);
	int finished(bool* result);
	
private:
	std::string _pruFile;
	GpioDevice* _leftDirPin;
	GpioDevice* _rightDirPin;
	GpioDevice* _enablePin;
};

}

#endif